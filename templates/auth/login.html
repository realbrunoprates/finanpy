{% extends 'base.html' %}

{% block title %}Login - Finanpy{% endblock %}

{% block content %}
<div class='min-h-screen flex items-center justify-center px-4 py-12'>
    <div class='w-full max-w-md'>
        <!-- Logo/Brand -->
        <div class='text-center mb-8'>
            <h1 class='text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent mb-2'>
                Finanpy
            </h1>
            <p class='text-text-secondary text-sm'>
                Gestão Financeira Pessoal
            </p>
        </div>

        <!-- Login Card -->
        <div class='bg-bg-secondary rounded-xl p-8 shadow-lg border border-bg-tertiary'>
            <!-- Title -->
            <h2 class='text-2xl font-bold text-text-primary mb-6'>
                Entrar
            </h2>

            <!-- Error Messages -->
            {% if form.non_field_errors %}
                <div class='bg-error/10 border border-error/20 rounded-lg p-4 mb-6'>
                    {% for error in form.non_field_errors %}
                        <p class='text-error font-medium text-sm'>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- Django Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class='{% if message.tags == "error" %}bg-error/10 border-error/20{% elif message.tags == "success" %}bg-success/10 border-success/20{% elif message.tags == "warning" %}bg-warning/10 border-warning/20{% else %}bg-info/10 border-info/20{% endif %} border rounded-lg p-4 mb-6'>
                        <p class='{% if message.tags == "error" %}text-error{% elif message.tags == "success" %}text-success{% elif message.tags == "warning" %}text-warning{% else %}text-info{% endif %} font-medium text-sm'>
                            {{ message }}
                        </p>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Login Form -->
            <form method='post' novalidate>
                {% csrf_token %}

                <!-- Username Field -->
                <div class='mb-6'>
                    <label for='{{ form.username.id_for_label }}' class='block text-text-secondary text-sm font-medium mb-2'>
                        Nome de Usuário ou E-mail
                        <span class='text-error'>*</span>
                    </label>
                    <input
                        type='text'
                        id='{{ form.username.id_for_label }}'
                        name='{{ form.username.name }}'
                        value='{{ form.username.value|default:"" }}'
                        class='w-full px-4 py-3 bg-bg-primary border {% if form.username.errors %}border-error{% else %}border-bg-tertiary{% endif %} rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200'
                        placeholder='Digite seu nome de usuário ou e-mail'
                        {% if form.username.field.required %}required{% endif %}
                        autofocus
                    >
                    {% if form.username.help_text %}
                        <p class='text-text-muted text-xs mt-1'>{{ form.username.help_text }}</p>
                    {% endif %}
                    {% if form.username.errors %}
                        {% for error in form.username.errors %}
                            <p class='text-error text-sm mt-1 flex items-center gap-1'>
                                <svg class='w-4 h-4 flex-shrink-0' fill='currentColor' viewBox='0 0 20 20'>
                                    <path fill-rule='evenodd' d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z' clip-rule='evenodd'/>
                                </svg>
                                <span>{{ error }}</span>
                            </p>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Password Field -->
                <div class='mb-6'>
                    <label for='{{ form.password.id_for_label }}' class='block text-text-secondary text-sm font-medium mb-2'>
                        Senha
                        <span class='text-error'>*</span>
                    </label>
                    <input
                        type='password'
                        id='{{ form.password.id_for_label }}'
                        name='{{ form.password.name }}'
                        class='w-full px-4 py-3 bg-bg-primary border {% if form.password.errors %}border-error{% else %}border-bg-tertiary{% endif %} rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200'
                        placeholder='Digite sua senha'
                        {% if form.password.field.required %}required{% endif %}
                    >
                    {% if form.password.help_text %}
                        <p class='text-text-muted text-xs mt-1'>{{ form.password.help_text }}</p>
                    {% endif %}
                    {% if form.password.errors %}
                        {% for error in form.password.errors %}
                            <p class='text-error text-sm mt-1 flex items-center gap-1'>
                                <svg class='w-4 h-4 flex-shrink-0' fill='currentColor' viewBox='0 0 20 20'>
                                    <path fill-rule='evenodd' d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z' clip-rule='evenodd'/>
                                </svg>
                                <span>{{ error }}</span>
                            </p>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Remember Me & Forgot Password -->
                <div class='flex items-center justify-between mb-6'>
                    <label class='flex items-center cursor-pointer'>
                        <input
                            type='checkbox'
                            name='remember_me'
                            class='w-4 h-4 bg-bg-primary border border-bg-tertiary rounded text-primary-500 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-bg-secondary transition-all duration-200'
                        >
                        <span class='ml-2 text-text-secondary text-sm'>Lembrar de mim</span>
                    </label>
                    <a
                        href='#'
                        class='text-primary-500 hover:text-primary-400 text-sm font-medium transition-colors duration-200'
                    >
                        Esqueceu a senha?
                    </a>
                </div>

                <!-- Submit Button -->
                <button
                    type='submit'
                    class='w-full px-6 py-3 bg-gradient-to-r from-primary-500 to-accent-500 text-white rounded-lg font-medium hover:from-primary-600 hover:to-accent-600 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-bg-secondary'
                >
                    Entrar
                </button>
            </form>

            <!-- Signup Link -->
            <div class='mt-6 text-center'>
                <p class='text-text-secondary text-sm'>
                    Não tem uma conta?
                    <a
                        href='{% url "users:signup" %}'
                        class='text-primary-500 hover:text-primary-400 font-medium transition-colors duration-200'
                    >
                        Cadastre-se
                    </a>
                </p>
            </div>
        </div>

        <!-- Additional Info -->
        <div class='mt-6 text-center'>
            <p class='text-text-muted text-xs'>
                Acesso seguro e protegido
            </p>
        </div>
    </div>
</div>
{% endblock %}
